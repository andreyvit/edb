package journaltest

import "testing"

func TestExpandAndHexDump(t *testing.T) {
	tests := []struct {
		input    string
		expected string
	}{
		{
			"",
			"00000000\n",
		},
		{
			"1",
			"00000000  01                       |.|\n",
		},
		{
			"0*5",
			"00000000  00 00 00 00 00           |.....|\n",
		},
		{
			"1_2_34_5",
			"00000000  01 02 34 05              |..4.|\n",
		},
		{
			"1...2",
			"00000000  01 00 00 00 00 00 00 02  |........|\n",
		},
		{
			"1_2...",
			"00000000  01 02 00 00 00 00 00 00  |........|\n",
		},
		{
			"1_2...*2",
			"00000000  01 02 00 00 00 00 00 00  |........|\n" +
				"00000008  01 02 00 00 00 00 00 00  |........|\n",
		},
		{
			"00 01 02 03 04 05 06 07",
			"00000000  00 01 02 03 04 05 06 07  |........|\n",
		},
		{
			"00 01 02 03 04 05 06 07 08 09 0a 0b 0c 0d 0e 0f",
			"00000000  00 01 02 03 04 05 06 07  |........|\n" +
				"00000008  08 09 0a 0b 0c 0d 0e 0f  |........|\n",
		},
		{
			"00 01 02 03 04 05 06 07 08 09 0a 0b 0c 0d 0e 0f 10 11 12 13 14 15 16 17",
			"00000000  00 01 02 03 04 05 06 07  |........|\n" +
				"00000008  08 09 0a 0b 0c 0d 0e 0f  |........|\n" +
				"00000010  10 11 12 13 14 15 16 17  |........|\n",
		},
		{
			"00*8",
			"00000000  00 00 00 00 00 00 00 00  |........|\n",
		},
		{
			"00 01 02 03 04 05 06 07 08 09 0a 0b 0c 0d 0e 0f 10 11 12 13 14 15 16 17 18 19 1a 1b 1c 1d 1e 1f",
			"00000000  00 01 02 03 04 05 06 07  |........|\n" +
				"00000008  08 09 0a 0b 0c 0d 0e 0f  |........|\n" +
				"00000010  10 11 12 13 14 15 16 17  |........|\n" +
				"00000018  18 19 1a 1b 1c 1d 1e 1f  |........|\n",
		},
	}

	for _, tt := range tests {
		expanded := Expand(tt.input)
		dump := HexDump(expanded, -1)
		if dump != tt.expected {
			t.Errorf("HexDump(%q) = %q, want %q", tt.input, dump, tt.expected)
		}
	}
}
